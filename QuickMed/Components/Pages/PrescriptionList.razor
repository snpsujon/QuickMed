@page "/prescription-list"
@using QuickMed.BaseComponent
@using QuickMed.DB
@inherits BasePrescriptionList

@*<h3 class="text-primary"> <i class="fas fa-prescription"></i> Prescription List</h3>*@
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-warning ">
                <h4 class="card-title text-light"> <i class="dripicons-view-list"></i> &nbsp;&nbsp;Prescription List</h4>
            </div><!--end card-header-->
            <div class="card-body">

                <table id="datatable-prescriptionList" class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                    <thead>
                        <tr>
                            <th class="border-top-0">Reg.</th>
                            <th class="border-top-0">Date</th>
                            <th class="border-top-0">Name</th>
                            <th class="border-top-0">Mobile</th>
                            <th class="border-top-0">Address</th>
                            <th class="border-top-0">Dx/Condition</th>
                            <th class="border-top-0">Plan</th>
                            <th class="border-top-0 text-end">Action</th>
                        </tr>
                    </thead>

                    <tbody>
                        @if (prescriptions != null && prescriptions.Any())
                        {
                            @foreach (var item in prescriptions.Select((value, index) => new { value, index }))
                            {
                                <tr>
                                    <td>@(item.index + 1)</td> <!-- Display serial number (index + 1) -->
                                    <td>@item.value.PrescriptionCode</td>
                                    <td>@item.value.PrescriptionDate</td>
                                    <td>@item.value.PatientName</td>
                                    <td>@item.value.MobileNumber</td>
                                    <td>@item.value.Address</td>
                                    <td>@item.value.Dx</td>
                                    <td>@item.value.Plan</td>


                                    <td class="text-end">
                                        <span class="text-primary mx-1 cursor-pointer" @onclick="() => OnPreviewClick(item.value)"><i class="dripicons-view"></i></span>
                                        <span class="text-primary mx-1 cursor-pointer" @onclick="() => OnEditClick(item.value)"><i class="dripicons-pencil"></i></span>
                                        <span class="text-danger mx-1 cursor-pointer" @onclick="() => OnDeleteClick(item.value.Id)"><i class="dripicons-trash"></i></span>
                                    </td>


                                </tr>
                            }


                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div> <!-- end col -->
</div> <!-- end row -->
